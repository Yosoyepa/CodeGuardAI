<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1278px" preserveAspectRatio="none" style="width:1678px;height:1278px;background:#FFFFFF;" version="1.1" viewBox="0 0 1678 1278" width="1678px" zoomAndPan="magnify"><title>Clean Architecture - CodeGuard AI (Onion Model with AI Integration)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="541.4541" x="561.2729" y="22.9951">Clean Architecture - CodeGuard AI (Onion Model with AI Integration)</text><!--cluster ==PRESENTATION LAYER==--><g id="cluster_==PRESENTATION LAYER=="><rect fill="#F3F4F6" height="138" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:1;" width="331" x="660" y="44.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="106.2031" x="772.3984" y="59.292">&#171;presentation&#187;</text><line style="stroke:#1E40AF;stroke-width:1;" x1="737.5796" x2="737.5796" y1="70.7422" y2="70.7422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="737.5796" x2="737.5796" y1="72.7422" y2="72.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="175.8408" x="737.5796" y="75.0889">PRESENTATION LAYER</text><line style="stroke:#1E40AF;stroke-width:1;" x1="913.4204" x2="913.4204" y1="70.7422" y2="70.7422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="913.4204" x2="913.4204" y1="72.7422" y2="72.7422"/></g><!--cluster ==APPLICATION LAYER==--><g id="cluster_==APPLICATION LAYER=="><rect fill="#E7F5FF" height="330.5" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:1;" width="378" x="743" y="231.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="94.5068" x="884.7466" y="246.292">&#171;application&#187;</text><line style="stroke:#1E40AF;stroke-width:1;" x1="851.958" x2="851.958" y1="257.7422" y2="257.7422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="851.958" x2="851.958" y1="259.7422" y2="259.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="160.084" x="851.958" y="262.0889">APPLICATION LAYER</text><line style="stroke:#1E40AF;stroke-width:1;" x1="1012.042" x2="1012.042" y1="257.7422" y2="257.7422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="1012.042" x2="1012.042" y1="259.7422" y2="259.7422"/></g><!--cluster ==DOMAIN LAYER (Core Business Logic)==--><g id="cluster_==DOMAIN LAYER (Core Business Logic)=="><rect fill="#FFF4E6" height="603.5" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:1;" width="695" x="7" y="423.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="69.7129" x="319.6436" y="438.792">&#171;domain&#187;</text><line style="stroke:#1E40AF;stroke-width:1;" x1="206.7036" x2="206.7036" y1="450.2422" y2="450.2422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="206.7036" x2="206.7036" y1="452.2422" y2="452.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="295.5928" x="206.7036" y="454.5889">DOMAIN LAYER (Core Business Logic)</text><line style="stroke:#1E40AF;stroke-width:1;" x1="502.2964" x2="502.2964" y1="450.2422" y2="450.2422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="502.2964" x2="502.2964" y1="452.2422" y2="452.2422"/></g><!--cluster ==INFRASTRUCTURE LAYER==--><g id="cluster_==INFRASTRUCTURE LAYER=="><rect fill="#F0FFF4" height="261" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:1;" width="946" x="726" y="610.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="113.1484" x="1142.4258" y="625.792">&#171;infrastructure&#187;</text><line style="stroke:#1E40AF;stroke-width:1;" x1="1100.7334" x2="1100.7334" y1="637.2422" y2="637.2422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="1100.7334" x2="1100.7334" y1="639.2422" y2="639.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="196.5332" x="1100.7334" y="641.5889">INFRASTRUCTURE LAYER</text><line style="stroke:#1E40AF;stroke-width:1;" x1="1297.2666" x2="1297.2666" y1="637.2422" y2="637.2422"/><line style="stroke:#1E40AF;stroke-width:1;" x1="1297.2666" x2="1297.2666" y1="639.2422" y2="639.2422"/></g><!--entity API--><g id="elem_API"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="129.4736" x="676.5" y="95.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93.2046" x="686.5" y="115.5073">FastAPI REST API</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88.7412" x="686.5" y="128.312">&#8226; POST /analyze</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="109.4736" x="686.5" y="141.1167">&#8226; GET /reviews/{id}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89.4609" x="686.5" y="153.9214">&#8226; OpenAPI /docs</text></g><!--entity WS--><g id="elem_WS"><rect fill="#F1F1F1" height="58.4141" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="134.4795" x="841" y="101.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="101.4063" x="851" y="122.0073">WebSocket Server</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114.4795" x="851" y="134.812">&#8226; Real-time progress</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="111.8154" x="851" y="147.6167">&#8226; ws:///analysis/{id}</text></g><!--entity AnalysisService--><g id="elem_AnalysisService"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="152.0322" x="759" y="282.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="85.9751" x="769" y="302.5073">AnalysisService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84.9868" x="769" y="315.312">&#8226; validate_file()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132.0322" x="769" y="328.1167">&#8226; orchestrate_analysis()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98.2642" x="769" y="340.9214">&#8226; persist_results()</text></g><!--entity AuthService--><g id="elem_AuthService"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="142.2676" x="759" y="474.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121.4028" x="769" y="495.0073">AuthenticationService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84.6001" x="769" y="507.812">&#8226; validate_jwt()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="122.2676" x="769" y="520.6167">&#8226; check_permissions()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66.1235" x="769" y="533.4214">&#8226; get_user()</text></g><!--entity AIService--><g id="elem_AIService"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="158.7407" x="946.5" y="282.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102.98" x="956.5" y="302.5073">AIExplainerService</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138.7407" x="956.5" y="315.312">&#8226; generate_explanation()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133.1333" x="956.5" y="328.1167">&#8226; fallback_to_template()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121.4834" x="956.5" y="340.9214">&#8226; cache_explanation()</text></g><!--entity Orchestrator--><g id="elem_Orchestrator"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="166.7383" x="487.5" y="474.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102.3999" x="497.5" y="495.0073">OrchestratorAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132.0322" x="497.5" y="507.812">&#8226; orchestrate_analysis()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="146.7383" x="497.5" y="520.6167">&#8226; calculate_quality_score()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102.2764" x="497.5" y="533.4214">&#8226; handle_failures()</text></g><!--entity BaseAgent--><g id="elem_BaseAgent"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="115.4443" x="417.5" y="797.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59.3452" x="427.5" y="817.5073">BaseAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58.8511" x="427.5" y="830.312">&#171;abstract&#187;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61.1284" x="427.5" y="843.1167">&#8226; analyze()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95.4443" x="427.5" y="855.9214">&#8226; get_metadata()</text></g><!--entity SecAgent--><g id="elem_SecAgent"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="156.8179" x="23.5" y="965.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="77.7305" x="33.5" y="985.5073">SecurityAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="136.8179" x="33.5" y="998.312">&#8226; detect_vulnerabilities()</text></g><!--entity QualAgent--><g id="elem_QualAgent"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="152.9722" x="215.5" y="965.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71.8652" x="225.5" y="985.5073">QualityAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132.9722" x="225.5" y="998.312">&#8226; measure_complexity()</text></g><!--entity PerfAgent--><g id="elem_PerfAgent"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="143.3096" x="403.5" y="965.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="102.8511" x="413.5" y="985.5073">PerformanceAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123.3096" x="413.5" y="998.312">&#8226; detect_bottlenecks()</text></g><!--entity StyleAgent--><g id="elem_StyleAgent"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="104.0039" x="582" y="965.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60.1885" x="592" y="985.5073">StyleAgent</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84.0039" x="592" y="998.312">&#8226; check_pep8()</text></g><!--entity EventBus--><g id="elem_EventBus"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="91.3604" x="385.5" y="649.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51.7612" x="395.5" y="669.5073">EventBus</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63.9214" x="395.5" y="682.312">&#171;Observer&#187;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58.3193" x="395.5" y="695.1167">&#8226; publish()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71.3604" x="395.5" y="707.9214">&#8226; subscribe()</text></g><!--entity Factory--><g id="elem_Factory"><rect fill="#F1F1F1" height="71.2188" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="118.5059" x="511.5" y="649.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73.7505" x="521.5" y="669.5073">AgentFactory</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65.291" x="521.5" y="682.312">&#171;Singleton&#187;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91.0024" x="521.5" y="695.1167">&#8226; create_agent()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="98.5059" x="521.5" y="707.9214">&#8226; register_agent()</text></g><!--entity ReviewRepo--><g id="elem_ReviewRepo"><rect fill="#F1F1F1" height="32.8047" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="146.8867" x="878.5" y="668.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126.8867" x="888.5" y="688.5073">CodeReviewRepository</text></g><!--entity FindingRepo--><g id="elem_FindingRepo"><rect fill="#F1F1F1" height="32.8047" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="151.8926" x="1335" y="668.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="131.8926" x="1345" y="688.5073">AgentFindingRepository</text></g><!--entity DB--><g id="elem_DB"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="83.4487" x="1052.5" y="809.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53.8989" x="1062.5" y="830.0073">Supabase</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63.4487" x="1062.5" y="842.812">PostgreSQL</text></g><!--entity Redis--><g id="elem_Redis"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="87.8853" x="1061" y="661.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67.8853" x="1071" y="682.0073">Redis Cache</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44.0322" x="1071" y="694.812">TTL 24h</text></g><!--entity Clerk--><g id="elem_Clerk"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="100.6147" x="742.5" y="661.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66.333" x="752.5" y="682.0073">Clerk OAuth</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80.6147" x="752.5" y="694.812">Google/GitHub</text></g><!--entity Gemini--><g id="elem_Gemini"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="115.3315" x="1184.5" y="661.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95.3315" x="1194.5" y="682.0073">Gemini API Client</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50.4185" x="1194.5" y="694.812">Flash/Pro</text></g><!--entity MCP--><g id="elem_MCP"><rect fill="#F1F1F1" height="45.6094" rx="2.5" ry="2.5" style="stroke:#1E40AF;stroke-width:2;" width="132.9004" x="1522.5" y="661.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112.9004" x="1532.5" y="682.0073">MCPContextEnricher</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="112.3848" x="1532.5" y="694.812">OWASP/CVE/Custom</text></g><g id="elem_GMN44"><path d="M468,274.7969 L468,360.4609 A0,0 0 0 0 468,360.4609 L567,360.4609 L571,474.7669 L575,360.4609 L673.8438,360.4609 A0,0 0 0 0 673.8438,360.4609 L673.8438,284.7969 L663.8438,274.7969 L468,274.7969 A0,0 0 0 0 468,274.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M663.8438,274.7969 L663.8438,284.7969 L673.8438,284.7969 L663.8438,274.7969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.3389" x="474" y="291.8638">Core Business Logic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.4507" x="474" y="306.9966">&#8226; No external dependencies</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.5771" x="474" y="322.1294">&#8226; Framework-independent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.8438" x="474" y="337.2622">&#8226; Highly testable in isolation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.1123" x="474" y="352.395">&#8226; Pure business rules</text></g><g id="elem_GMN47"><path d="M975,945.2969 L975,1030.9609 A0,0 0 0 0 975,1030.9609 L1213.2358,1030.9609 A0,0 0 0 0 1213.2358,1030.9609 L1213.2358,955.2969 L1203.2358,945.2969 L1098,945.2969 L1094,856.1169 L1090,945.2969 L975,945.2969 A0,0 0 0 0 975,945.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1203.2358,945.2969 L1203.2358,955.2969 L1213.2358,955.2969 L1203.2358,945.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="127.499" x="981" y="962.3638">External Services</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.1265" x="981" y="977.4966">&#8226; Database, APIs, Cache</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.8154" x="981" y="992.6294">&#8226; Implements interfaces</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.7935" x="981" y="1007.7622">&#8226; Defined in Domain layer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217.2358" x="981" y="1022.895">&#8226; Dependency Inversion Principle</text></g><!--link API to AnalysisService--><g id="link_API_AnalysisService"><path d="M758.68,166.5969 C775.49,199.6669 797.9018,243.7879 814.6818,276.8079 " fill="none" id="API-to-AnalysisService" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="817.4,282.1569,816.8886,272.3213,815.1348,277.6994,809.7567,275.9456,817.4,282.1569" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="783" y="211.3638">&#171;uses&#187;</text></g><!--link WS to AnalysisService--><g id="link_WS_AnalysisService"><path d="M896.91,159.8969 C883.99,192.6469 864.8316,241.1954 850.8916,276.5354 " fill="none" id="WS-to-AnalysisService" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="848.69,282.1169,855.7134,275.2124,850.5247,277.4656,848.2715,272.2769,848.69,282.1169" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="881" y="211.3638">&#171;uses&#187;</text></g><!--link AnalysisService to Orchestrator--><g id="link_AnalysisService_Orchestrator"><path d="M786.89,353.5169 C739.29,387.8569 671.7255,436.6159 624.0955,470.9859 " fill="none" id="AnalysisService-to-Orchestrator" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="619.23,474.4969,628.8689,472.4741,623.2846,471.5711,624.1876,465.9868,619.23,474.4969" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="735" y="403.8638">&#171;uses&#187;</text></g><!--link AnalysisService to ReviewRepo--><g id="link_AnalysisService_ReviewRepo"><path d="M873.91,353.3569 C890.59,370.4369 908.6,392.3869 919,415.7969 C958.5,504.6869 956.0015,619.5672 953.5015,662.1672 " fill="none" id="AnalysisService-to-ReviewRepo" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="953.15,668.1569,957.6704,659.4067,953.4429,663.1655,949.6841,658.938,953.15,668.1569" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="953" y="514.8638">&#171;uses&#187;</text></g><!--link AnalysisService to AuthService--><g id="link_AnalysisService_AuthService"><path d="M834.08,353.7369 C833.18,388.1069 831.9674,434.2889 831.0674,468.5789 " fill="none" id="AnalysisService-to-AuthService" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="830.91,474.5769,835.1448,465.6849,831.0412,469.5786,827.1475,465.475,830.91,474.5769" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="834" y="403.8638">&#171;uses&#187;</text></g><!--link AuthService to Clerk--><g id="link_AuthService_Clerk"><path d="M822.51,546.2069 C815.1,580.7569 805.2381,626.7303 798.9781,655.9203 " fill="none" id="AuthService-to-Clerk" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="797.72,661.7869,803.5183,653.8257,798.7684,656.898,795.6961,652.1482,797.72,661.7869" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.8154" x="815" y="590.8638">&#171;implements&#187;</text></g><!--link AIService to Gemini--><g id="link_AIService_Gemini"><path d="M1073.61,353.4969 C1094.3,370.4569 1117.52,392.2669 1134,415.7969 C1191.13,497.3569 1223.1303,607.7497 1235.2803,655.8397 " fill="none" id="AIService-to-Gemini" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="1236.75,661.6569,1238.4236,651.9512,1235.5252,656.8092,1230.6673,653.9109,1236.75,661.6569" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.8154" x="1209" y="514.8638">&#171;implements&#187;</text></g><!--link AIService to MCP--><g id="link_AIService_MCP"><path d="M1105.64,336.0869 C1164.92,351.2369 1246.25,376.9869 1310,415.7969 C1425.32,485.9869 1527.8082,606.4866 1568.1282,657.0266 " fill="none" id="AIService-to-MCP" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="1571.87,661.7169,1569.3841,652.1869,1568.7518,657.8083,1563.1304,657.176,1571.87,661.7169" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="1491" y="514.8638">&#171;uses&#187;</text></g><!--link AIService to Redis--><g id="link_AIService_Redis"><path d="M1033.5,353.4669 C1049.56,427.6669 1085.6206,594.2627 1098.9206,655.7027 " fill="none" id="AIService-to-Redis" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="1100.19,661.5669,1102.1953,651.9243,1099.1321,656.6801,1094.3764,653.6169,1100.19,661.5669" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="1080" y="514.8638">&#171;uses&#187;</text></g><!--link Orchestrator to Factory--><g id="link_Orchestrator_Factory"><path d="M571,546.2069 C571,576.2269 571,613.3069 571,643.2369 " fill="none" id="Orchestrator-to-Factory" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="571,649.2369,575,640.2369,571,644.2369,567,640.2369,571,649.2369" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45.6904" x="572" y="590.8638">&#171;uses&#187;</text></g><!--link Orchestrator to EventBus--><g id="link_Orchestrator_EventBus"><path d="M517.47,546.1069 C505.52,555.4569 493.57,566.2269 484,577.7969 C466.43,599.0469 455.0228,621.5422 445.9628,643.4522 " fill="none" id="Orchestrator-to-EventBus" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="443.67,648.9969,450.8056,642.2084,445.5806,644.3763,443.4127,639.1514,443.67,648.9969" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.6572" x="485" y="590.8638">&#171;publishes&#187;</text></g><!--link Factory to BaseAgent--><g id="link_Factory_BaseAgent"><path d="M548.25,720.3969 C533,743.5869 516.2967,768.9937 501.0467,792.1837 " fill="none" id="Factory-to-BaseAgent" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="497.75,797.1969,506.0372,791.8749,500.4973,793.0192,499.353,787.4793,497.75,797.1969" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.2319" x="526" y="763.3638">&#171;creates&#187;</text></g><!--reverse link BaseAgent to SecAgent--><g id="link_BaseAgent_SecAgent"><path d="M400.4351,860.6494 C366.8851,872.9194 340.79,882.8569 303,898.2969 C250.01,919.9469 190.11,946.7769 149.59,965.2869 " fill="none" id="BaseAgent-backto-SecAgent" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="none" points="417.34,854.4669,398.3742,855.0144,402.4959,866.2844,417.34,854.4669" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.958" x="304" y="911.3638">&#171;extends&#187;</text></g><!--reverse link BaseAgent to QualAgent--><g id="link_BaseAgent_QualAgent"><path d="M419.6336,880.158 C408.1536,889.778 409.49,888.6569 398,898.2969 C370.93,920.9969 340,946.9669 318.57,964.9769 " fill="none" id="BaseAgent-backto-QualAgent" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="none" points="433.43,868.5969,415.7799,875.5592,423.4873,884.7568,433.43,868.5969" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.958" x="399" y="911.3638">&#171;extends&#187;</text></g><!--reverse link BaseAgent to PerfAgent--><g id="link_BaseAgent_PerfAgent"><path d="M475,886.6269 C475,916.1769 475,939.6669 475,964.9569 " fill="none" id="BaseAgent-backto-PerfAgent" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="none" points="475,868.6269,469,886.6269,481,886.6269,475,868.6269" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.958" x="476" y="911.3638">&#171;extends&#187;</text></g><!--reverse link BaseAgent to StyleAgent--><g id="link_BaseAgent_StyleAgent"><path d="M532.0087,879.8971 C543.2587,889.3371 541.4,888.1869 552,898.2969 C574.65,919.9069 598.71,946.5069 614.87,964.9769 " fill="none" id="BaseAgent-backto-StyleAgent" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="none" points="518.22,868.3269,528.152,884.4934,535.8655,875.3009,518.22,868.3269" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.958" x="569" y="911.3638">&#171;extends&#187;</text></g><!--link ReviewRepo to DB--><g id="link_ReviewRepo_DB"><path d="M967.2,701.4169 C992.52,727.4669 1039.2676,775.5148 1068.2776,805.3548 " fill="none" id="ReviewRepo-to-DB" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="1072.46,809.6569,1069.0545,800.4155,1068.9747,806.0718,1063.3184,805.9921,1072.46,809.6569" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5298" x="1028" y="763.3638">&#171;persists&#187;</text></g><!--link FindingRepo to DB--><g id="link_FindingRepo_DB"><path d="M1377.08,701.4169 C1318.62,728.3469 1204.5296,780.8865 1141.1196,810.0965 " fill="none" id="FindingRepo-to-DB" style="stroke:#6366F1;stroke-width:2;"/><polygon fill="#6366F1" points="1135.67,812.6069,1145.518,812.4744,1140.2113,810.5149,1142.1708,805.2083,1135.67,812.6069" style="stroke:#6366F1;stroke-width:2;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5298" x="1263" y="763.3638">&#171;persists&#187;</text></g><rect fill="none" height="209.5625" id="_legend" rx="7.5" ry="7.5" style="stroke:#000000;stroke-width:1;" width="232.6807" x="1419.3193" y="1048.9609"/><rect fill="#FFF4E6" height="16.2969" style="stroke:none;stroke-width:1;" width="8.9004" x="1424.3193" y="1055.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="1424.3193" y="1068.9561">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1433.2197" y="1068.9561">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="162.7705" x="1437.6699" y="1068.9561">Domain Layer (Core)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1600.4404" y="1068.9561">&#160;</text><rect fill="#E7F5FF" height="16.2969" style="stroke:none;stroke-width:1;" width="8.9004" x="1424.3193" y="1072.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="1424.3193" y="1085.2529">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1433.2197" y="1085.2529">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="138.0654" x="1437.6699" y="1085.2529">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1575.7354" y="1085.2529">&#160;</text><rect fill="#F0FFF4" height="16.2969" style="stroke:none;stroke-width:1;" width="8.9004" x="1424.3193" y="1088.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="1424.3193" y="1101.5498">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1433.2197" y="1101.5498">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="159.6396" x="1437.6699" y="1101.5498">Infrastructure Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1597.3096" y="1101.5498">&#160;</text><rect fill="#F3F4F6" height="16.2969" style="stroke:none;stroke-width:1;" width="8.9004" x="1424.3193" y="1104.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="8.9004" x="1424.3193" y="1117.8467">&#160;&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1433.2197" y="1117.8467">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="150.4385" x="1437.6699" y="1117.8467">Presentation Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1588.1084" y="1117.8467">&#160;</text><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1604.8906" y1="1055.9609" y2="1055.9609"/><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1604.8906" y1="1072.2578" y2="1072.2578"/><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1604.8906" y1="1088.5547" y2="1088.5547"/><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1604.8906" y1="1104.8516" y2="1104.8516"/><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1604.8906" y1="1121.1484" y2="1121.1484"/><line style="stroke:#000000;stroke-width:1;" x1="1424.3193" x2="1424.3193" y1="1055.9609" y2="1121.1484"/><line style="stroke:#000000;stroke-width:1;" x1="1433.2197" x2="1433.2197" y1="1055.9609" y2="1121.1484"/><line style="stroke:#000000;stroke-width:1;" x1="1604.8906" x2="1604.8906" y1="1055.9609" y2="1121.1484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1424.3193" y="1136.1436">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="143.0215" x="1424.3193" y="1152.4404">Dependency Rule:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="222.6807" x="1424.3193" y="1168.7373">All dependencies point INWARD</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180.9336" x="1424.3193" y="1185.0342">toward the Domain (core)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4.4502" x="1424.3193" y="1201.3311">&#160;</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109.2861" x="1424.3193" y="1217.6279">Key Principle:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182.458" x="1424.3193" y="1233.9248">Inner layers know nothing</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.0078" x="1424.3193" y="1250.2217">about outer layers</text><!--SRC=[tLVRRkCs47ttLn3RXoR06jviqhGm4WEABrcZIUorlGsAfZ0eQMApfacLfEBrNe1-Ip-jNz8XASgIuwPzRe0a4kVCp9aBXvHUCP5HHTSaaUjC2X1cQhOSY8B4KB7WqD0b9AR9Qg5aBjAkv5AHRmRkfr61b5R8vmOXLtM5YujKhYaJdOvJFUkV7yBGBECieOP91-n_F_WEVHm0Cl6eg3OgJqokm1bzOyqUmcOADB8ghGvE1sS3vrwg55GHpqd_x4qqA5TdIvQi16XDtkBQG69ks2SW9oUDhzMOCtH65_3_YlYq5l5PU7Ez4KkUrbD0bP8Rbu32xldf-VdW1D-hEKGLmmmQw7AWWaGgMJ83BXRIHCqKhdEgKX8DoT5886zoYskSR9XPsiMXCB1GBgBZHkDRSaEteCX9cumhiJRApYMlBY_7a_wqVpUBPiFH7Rc9VkvFBYzVaMVPiSnthVlB09CSZOS4bMS47nx4Nt_yISOZV6jHGVds4_YbwpwkA7XYiD6jpopzwfT76GYhtqfbedybL5iZTHVt44zbiW93fg2UG7d52L3UD6mD95DoWHorNz_eTglbNMlcFJcpzrERr929jsqIxLgfdeXeFBuPTf_beTvwUsc82d-M8KkAa9yePoarC7za78wE_QB4KW8sfbqFB8Ci0uLlPexHvDpWiaz8tVQUuzmiyQ4WTjZzRniJFA3lP3L7FskcDIgKhXTWvha65NoYsSF-XlsF6STz2ghcR06uOfs15Gl79jX-f9pRWJWtScvWZN9JfYEXIAckv0aCW_jArKxRfEU613dgIWN7zRhrHhVHi2YP1v2hN3EtesxaWYN7lf3bdDchuQYiZ5GHncF-lM09vKbkmvd_dcEspNQk4_GRn4igKexbfupZnWtrhFgfCxYY6WhFs6-nnIIcq_76YjrKBTWQ3CKAqy9mgLwtEeKaLyYj4bCATfZCdt9kgnOpfCvAVeW_OEMz3x1YP0rKOrXp2-Bm4OM50GizO64Cwb6gDHK9FASIIuFZJc1t1XeMVYWQErSh-g6Ziny2_H9GL-m_uJzi29lRKQpTA0cvpVAOCxqCkTLvh1F5OYXC1jMzhM1z3B12KcsjqIcpdMZiU2YeAN1DOt71j885xd1GOTNPBunKM_siZJEyUeJLUtruDvX4qzdaGtVsOTAlZgbd1zzUbzkpO-B6y0GogPbrx4Zi5W-5oKIAuUsfL5PHntPYZ2s8DSepz_GWnb8R7CxJzpTEeNTLmqqWPPfqxGXu4BFP3NbxjYoue62FDmUr8YCxc1x4jPIOYDOrC-_os6auSLtZ6jPCC7kUe9IvXXbmgfUjiP9EnmFgIhVTSHTFR_Xe-a8n98R7pUW-cevRtP_whMwkZLmxPGJwUlK0Zx0KH88xY1oLRrkitvETvrAq2Gv0V_1haac6VfZOsEFRIFVF3xNZXgNQJEL6D3lxKv-qiROue7MdqxYV_XTKOryMTAhpfwhmJ_XTOxo8jcnsfqQTIMKzMFNrj2XcnySQi- -nmtraKSTdq0eIKLYF6hsQq3TQbL8j2HPIxC4gw1acp047AcQ6DnUq0-To53ke7mGEk1DSV6asordhODXqs3iMjeSg1-hBi79YlWpR3SWzNADIwH18xye7wsyc5bNPz2-WS6CCkCGJNIo8a1Xym_x5Xi-8VDm_0Y_Ype7Z-g8LTr1ef-QT99Qcmfx30sEttmhn02_Mi95grKHkXTWKidTiiUHRWWnmwk3mnCi3qvBxUv-7ZEsjEWw-LSxHCDfml1kUjpsUvDfIToCC2VS3dwBFT8LkhvXmh-tmqQ_zX2jamxA5aGgQUAH96KSF7f53QZaMznnk3uDI-doqu7sUOIRGP8KnXuLzKHYvpSANY-A3geFFbdfXsnyq_YPboPCl7km_gWAuSats6bMe_wOAqFg1TG3jlgi2klebieVr6Qx4Ey6Qj8i4HxpU0yL47TxTHvCUoekPYjVYyhAOkCjYiFiZR7Tf2rQ70cz2FjsQh0H-ec4kbzYzAAEnp0t1tn9Xa-sptFWR]--></g></svg>