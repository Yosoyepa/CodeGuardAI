<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3157px" preserveAspectRatio="none" style="width:2107px;height:3157px;background:#FFFFFF;" version="1.1" viewBox="0 0 2107 3157" width="2107px" zoomAndPan="magnify"><title>Sequence Diagram - Admin Configuration Workflow (Sprint 4)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="487.6758" x="805.7996" y="27.9951">Sequence Diagram - Admin Configuration Workflow (Sprint 4)</text><rect fill="#FFFFFF" height="257.3281" style="stroke:#181818;stroke-width:1;" width="10" x="305.3574" y="149.7266"/><rect fill="#FFFFFF" height="489.5234" style="stroke:#181818;stroke-width:1;" width="10" x="305.3574" y="1205.5156"/><rect fill="#FFFFFF" height="213.0625" style="stroke:#181818;stroke-width:1;" width="10" x="661.6826" y="193.9922"/><rect fill="#FFFFFF" height="286.4609" style="stroke:#181818;stroke-width:1;" width="10" x="661.6826" y="1408.5781"/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="989.2827" y="223.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="989.2827" y="1437.7109"/><rect fill="#FFFFFF" height="468.9297" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="450.9922"/><rect fill="#FFFFFF" height="727.7891" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="1495.9766"/><rect fill="#FFFFFF" height="440.5234" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="2303.0313"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="606.4609"/><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="722.9922"/><rect fill="#FFFFFF" height="163.0625" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="1738.9766"/><rect fill="#FFFFFF" height="147.9297" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="2419.6953"/><rect fill="#FFFFFF" height="116.6641" style="stroke:#181818;stroke-width:1;" width="10" x="1596.7129" y="2077.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1596.7129" y="2685.2891"/><rect fill="#FFFFFF" height="2587.2891" style="stroke:#181818;stroke-width:1;" width="10" x="1764.5405" y="480.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="854.6563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="1931.1719"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="1989.4375"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="2596.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="635.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="767.2578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="1843.7734"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="2509.3594"/><rect fill="none" height="764.3281" style="stroke:#000000;stroke-width:1.5;" width="2080.2749" x="10" y="324.5234"/><rect fill="none" height="396.6641" style="stroke:#000000;stroke-width:1.5;" width="972.6021" x="1107.6729" y="495.125"/><rect fill="none" height="648.3906" style="stroke:#000000;stroke-width:1.5;" width="2070.2749" x="10" y="1583.375"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310.1382" x2="310.1382" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="666.439" x2="666.439" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="994.0264" x2="994.0264" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1172.6729" x2="1172.6729" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1483.7827" x2="1483.7827" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1600.7739" x2="1600.7739" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1768.5659" x2="1768.5659" y1="118.5938" y2="3076.4141"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2022.522" x2="2022.522" y1="118.5938" y2="3076.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8643" x="20" y="115.292">Admin</text><ellipse cx="45.4321" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45.4321,58.7969 L45.4321,85.7969 M32.4321,66.7969 L58.4321,66.7969 M45.4321,85.7969 L32.4321,100.7969 M45.4321,85.7969 L58.4321,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44.8643" x="20" y="3088.4092">Admin</text><ellipse cx="45.4321" cy="3100.2109" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M45.4321,3108.2109 L45.4321,3135.2109 M32.4321,3116.2109 L58.4321,3116.2109 M45.4321,3135.2109 L32.4321,3150.2109 M45.4321,3135.2109 L58.4321,3150.2109 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.4385" x="235.1382" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="278.8027" y="90.9951">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.4385" x="242.1382" y="107.292">(Admin Dashboard)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150.4385" x="235.1382" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.1094" x="278.8027" y="3095.4092">Frontend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136.4385" x="242.1382" y="3111.7061">(Admin Dashboard)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.4873" x="628.439" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3613" x="636.502" y="90.9951">Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.4873" x="635.439" y="107.292">(FastAPI)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76.4873" x="628.439" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.3613" x="636.502" y="3095.4092">Backend</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.4873" x="635.439" y="3111.7061">(FastAPI)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168.5127" x="910.0264" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5127" x="917.0264" y="107.292">AuthenticationService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168.5127" x="910.0264" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154.5127" x="917.0264" y="3095.4092">AuthenticationService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.6602" x="1117.6729" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6602" x="1124.6729" y="107.292">ConfigService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110.6602" x="1117.6729" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96.6602" x="1124.6729" y="3095.4092">ConfigService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.9912" x="1417.7827" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.9912" x="1424.7827" y="107.292">ConfigRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133.9912" x="1417.7827" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.9912" x="1424.7827" y="3095.4092">ConfigRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.8779" x="1561.7739" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8779" x="1568.7739" y="107.292">EventBus</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79.8779" x="1561.7739" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65.8779" x="1568.7739" y="3095.4092">EventBus</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.9492" x="1721.5659" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.9492" x="1728.5659" y="107.292">RedisCache</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.9492" x="1721.5659" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.9492" x="1728.5659" y="3095.4092">RedisCache</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.7529" x="1975.522" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="1982.522" y="107.292">PostgreSQL</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94.7529" x="1975.522" y="3075.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="1982.522" y="3095.4092">PostgreSQL</text><rect fill="#FFFFFF" height="257.3281" style="stroke:#181818;stroke-width:1;" width="10" x="305.3574" y="149.7266"/><rect fill="#FFFFFF" height="489.5234" style="stroke:#181818;stroke-width:1;" width="10" x="305.3574" y="1205.5156"/><rect fill="#FFFFFF" height="213.0625" style="stroke:#181818;stroke-width:1;" width="10" x="661.6826" y="193.9922"/><rect fill="#FFFFFF" height="286.4609" style="stroke:#181818;stroke-width:1;" width="10" x="661.6826" y="1408.5781"/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1;" width="10" x="989.2827" y="223.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="989.2827" y="1437.7109"/><rect fill="#FFFFFF" height="468.9297" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="450.9922"/><rect fill="#FFFFFF" height="727.7891" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="1495.9766"/><rect fill="#FFFFFF" height="440.5234" style="stroke:#181818;stroke-width:1;" width="10" x="1168.0029" y="2303.0313"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="606.4609"/><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="722.9922"/><rect fill="#FFFFFF" height="163.0625" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="1738.9766"/><rect fill="#FFFFFF" height="147.9297" style="stroke:#181818;stroke-width:1;" width="10" x="1479.7783" y="2419.6953"/><rect fill="#FFFFFF" height="116.6641" style="stroke:#181818;stroke-width:1;" width="10" x="1596.7129" y="2077.9688"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1596.7129" y="2685.2891"/><rect fill="#FFFFFF" height="2587.2891" style="stroke:#181818;stroke-width:1;" width="10" x="1764.5405" y="480.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="854.6563"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="1931.1719"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="1989.4375"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="1769.5405" y="2596.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="635.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="767.2578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="1843.7734"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="2017.8984" y="2509.3594"/><polygon fill="#181818" points="293.3574,145.7266,303.3574,149.7266,293.3574,153.7266,297.3574,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="45.4321" x2="299.3574" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.1743" x="77.3076" y="144.6606">Navigate to Admin Dashboard</text><polygon fill="#181818" points="649.6826,189.9922,659.6826,193.9922,649.6826,197.9922,653.6826,193.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="315.3574" x2="655.6826" y1="193.9922" y2="193.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.1885" x="406.4258" y="173.7935">GET /api/v1/admin/config</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.6997" x="393.6702" y="188.9263">Authorization: Bearer &lt;JWT&gt;</text><polygon fill="#181818" points="977.2827,219.125,987.2827,223.125,977.2827,227.125,981.2827,223.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="671.6826" x2="983.2827" y1="223.125" y2="223.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.998" x="767.9836" y="218.0591">validate_jwt(token)</text><line style="stroke:#181818;stroke-width:1;" x1="999.2827" x2="1041.2827" y1="267.3906" y2="267.3906"/><line style="stroke:#181818;stroke-width:1;" x1="1041.2827" x2="1041.2827" y1="267.3906" y2="280.3906"/><line style="stroke:#181818;stroke-width:1;" x1="1000.2827" x2="1041.2827" y1="280.3906" y2="280.3906"/><polygon fill="#181818" points="1010.2827,276.3906,1000.2827,280.3906,1010.2827,284.3906,1006.2827,280.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.7202" x="1006.2827" y="247.1919">Verify token signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.8906" x="1023.6975" y="262.3247">Check expiration</text><polygon fill="#181818" points="682.6826,305.5234,672.6826,309.5234,682.6826,313.5234,678.6826,309.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="676.6826" x2="993.2827" y1="309.5234" y2="309.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.7202" x="760.6226" y="304.4575">User object (with role)</text><path d="M10,324.5234 L74.4429,324.5234 L74.4429,331.6563 L64.4429,341.6563 L10,341.6563 L10,324.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="764.3281" style="stroke:#000000;stroke-width:1.5;" width="2080.2749" x="10" y="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="337.5903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130.2437" x="89.4429" y="336.7339">[User role != ADMIN]</text><polygon fill="#181818" points="326.3574,373.9219,316.3574,377.9219,326.3574,381.9219,322.3574,377.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="320.3574" x2="660.6826" y1="377.9219" y2="377.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.0986" x="417.4707" y="357.7231">HTTP 403 (Forbidden)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.728" x="373.656" y="372.856">{"error": "Admin access required"}</text><polygon fill="#181818" points="56.4321,403.0547,46.4321,407.0547,56.4321,411.0547,52.4321,407.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="50.4321" x2="309.3574" y1="407.0547" y2="407.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.7515" x="111.019" y="401.9888">Show error message</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="2090.2749" y1="416.0547" y2="416.0547"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98.2856" x="15" y="426.2651">[User is ADMIN]</text><polygon fill="#181818" points="1156.0029,446.9922,1166.0029,450.9922,1156.0029,454.9922,1160.0029,450.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="666.6826" x2="1162.0029" y1="450.9922" y2="450.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.2344" x="864.2256" y="445.9263">get_all_configs()</text><polygon fill="#181818" points="1752.5405,476.125,1762.5405,480.125,1752.5405,484.125,1756.5405,480.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1758.5405" y1="480.125" y2="480.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.8003" x="1419.8716" y="475.0591">get("config:all")</text><path d="M1107.6729,495.125 L1172.1157,495.125 L1172.1157,502.2578 L1162.1157,512.2578 L1107.6729,512.2578 L1107.6729,495.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="396.6641" style="stroke:#000000;stroke-width:1.5;" width="972.6021" x="1107.6729" y="495.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="1122.6729" y="508.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="68.0518" x="1187.1157" y="507.3354">[Cache hit]</text><polygon fill="#181818" points="1189.0029,529.3906,1179.0029,533.3906,1189.0029,537.3906,1185.0029,533.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="533.3906" y2="533.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.3662" x="1421.5886" y="528.3247">Cached configs</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1107.6729" x2="2080.2749" y1="542.3906" y2="542.3906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.519" x="1112.6729" y="552.6011">[Cache miss]</text><polygon fill="#181818" points="1189.0029,573.3281,1179.0029,577.3281,1189.0029,581.3281,1185.0029,577.3281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="577.3281" y2="577.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.7021" x="1459.4207" y="572.2622">null</text><polygon fill="#181818" points="1467.7783,602.4609,1477.7783,606.4609,1467.7783,610.4609,1471.7783,606.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1473.7783" y1="606.4609" y2="606.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.2871" x="1253.7471" y="601.395">get_all_agent_configs()</text><polygon fill="#181818" points="2005.8984,631.5938,2015.8984,635.5938,2005.8984,639.5938,2009.8984,635.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1489.7783" x2="2011.8984" y1="635.5938" y2="635.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.4028" x="1655.637" y="630.5278">SELECT * FROM agent_configs</text><polygon fill="#181818" points="1500.7783,660.7266,1490.7783,664.7266,1500.7783,668.7266,1496.7783,664.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1494.7783" x2="2021.8984" y1="664.7266" y2="664.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.4424" x="1693.6172" y="659.6606">agent_configs rows</text><polygon fill="#181818" points="1189.0029,689.8594,1179.0029,693.8594,1189.0029,697.8594,1185.0029,693.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1483.7783" y1="693.8594" y2="693.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.0581" x="1274.8616" y="688.7935">List[AgentConfig]</text><polygon fill="#181818" points="1467.7783,718.9922,1477.7783,722.9922,1467.7783,726.9922,1471.7783,722.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1473.7783" y1="722.9922" y2="722.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.8496" x="1280.9658" y="717.9263">get_ai_config()</text><polygon fill="#181818" points="2005.8984,763.2578,2015.8984,767.2578,2005.8984,771.2578,2009.8984,767.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1489.7783" x2="2011.8984" y1="767.2578" y2="767.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.6553" x="1672.0107" y="747.0591">SELECT * FROM ai_config</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.4712" x="1730.6028" y="762.1919">LIMIT 1</text><polygon fill="#181818" points="1500.7783,792.3906,1490.7783,796.3906,1500.7783,800.3906,1496.7783,796.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1494.7783" x2="2021.8984" y1="796.3906" y2="796.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.9219" x="1713.3774" y="791.3247">ai_config row</text><polygon fill="#181818" points="1189.0029,821.5234,1179.0029,825.5234,1189.0029,829.5234,1185.0029,825.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1483.7783" y1="825.5234" y2="825.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54.4375" x="1304.1719" y="820.4575">AIConfig</text><polygon fill="#181818" points="1757.5405,850.6563,1767.5405,854.6563,1757.5405,858.6563,1761.5405,854.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1763.5405" y1="854.6563" y2="854.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.187" x="1362.6782" y="849.5903">set("config:all", configs, ttl=3600)</text><polygon fill="#181818" points="1189.0029,879.7891,1179.0029,883.7891,1189.0029,887.7891,1185.0029,883.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="883.7891" y2="883.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18.7573" x="1461.8931" y="878.7231">OK</text><polygon fill="#181818" points="677.6826,915.9219,667.6826,919.9219,677.6826,923.9219,673.6826,919.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="671.6826" x2="1172.0029" y1="919.9219" y2="919.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.7837" x="873.4509" y="914.856">AllConfigsDTO</text><polygon fill="#181818" points="321.3574,960.1875,311.3574,964.1875,321.3574,968.1875,317.3574,964.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="315.3574" x2="665.6826" y1="964.1875" y2="964.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.4419" x="457.2991" y="943.9888">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.0923" x="352.4739" y="959.1216">{"agent_configs": {...}, "ai_config": {...}}</text><line style="stroke:#181818;stroke-width:1;" x1="310.3574" x2="352.3574" y1="1038.7188" y2="1038.7188"/><line style="stroke:#181818;stroke-width:1;" x1="352.3574" x2="352.3574" y1="1038.7188" y2="1051.7188"/><line style="stroke:#181818;stroke-width:1;" x1="311.3574" x2="352.3574" y1="1051.7188" y2="1051.7188"/><polygon fill="#181818" points="321.3574,1047.7188,311.3574,1051.7188,321.3574,1055.7188,317.3574,1051.7188" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.4487" x="317.3574" y="988.2544">Render config form</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.3496" x="328.907" y="1003.3872">&#8226; Agent toggles</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.501" x="339.8313" y="1018.52">&#8226; AI settings</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.4976" x="319.833" y="1033.6528">&#8226; Threshold inputs</text><polygon fill="#181818" points="56.4321,1076.8516,46.4321,1080.8516,56.4321,1084.8516,52.4321,1080.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="50.4321" x2="309.3574" y1="1080.8516" y2="1080.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.7651" x="100.0122" y="1075.7856">Display configuration UI</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2100.2749" x="0" y="1116.418"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="1116.418" y2="1116.418"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="1119.418" y2="1119.418"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="236.936" x="931.6694" y="1105.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="218.4102" x="937.6694" y="1121.9185">Admin Modifies Configuration</text><polygon fill="#181818" points="293.3574,1201.5156,303.3574,1205.5156,293.3574,1209.5156,297.3574,1205.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="45.4321" x2="299.3574" y1="1205.5156" y2="1205.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.6572" x="123.5662" y="1155.0513">Modify settings:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.019" x="97.3853" y="1170.1841">&#8226; Disable SecurityAgent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.4019" x="81.6938" y="1185.3169">&#8226; Set AI model to Gemini Pro</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.9253" x="54.9321" y="1200.4497">&#8226; Change complexity threshold to 15</text><line style="stroke:#181818;stroke-width:1;" x1="315.3574" x2="357.3574" y1="1264.9141" y2="1264.9141"/><line style="stroke:#181818;stroke-width:1;" x1="357.3574" x2="357.3574" y1="1264.9141" y2="1277.9141"/><line style="stroke:#181818;stroke-width:1;" x1="316.3574" x2="357.3574" y1="1277.9141" y2="1277.9141"/><polygon fill="#181818" points="326.3574,1273.9141,316.3574,1277.9141,326.3574,1281.9141,322.3574,1277.9141" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.3481" x="368.5969" y="1229.5825">Validate input:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.1094" x="328.2163" y="1244.7153">&#8226; Thresholds in valid range</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.8271" x="322.3574" y="1259.8481">&#8226; At least one agent enabled</text><line style="stroke:#181818;stroke-width:1;" x1="315.3574" x2="357.3574" y1="1307.0469" y2="1307.0469"/><line style="stroke:#181818;stroke-width:1;" x1="357.3574" x2="357.3574" y1="1307.0469" y2="1320.0469"/><line style="stroke:#181818;stroke-width:1;" x1="316.3574" x2="357.3574" y1="1320.0469" y2="1320.0469"/><polygon fill="#181818" points="326.3574,1316.0469,316.3574,1320.0469,326.3574,1324.0469,322.3574,1320.0469" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.1006" x="322.3574" y="1301.981">Show save button enabled</text><polygon fill="#181818" points="293.3574,1345.1797,303.3574,1349.1797,293.3574,1353.1797,297.3574,1349.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="45.4321" x2="299.3574" y1="1349.1797" y2="1349.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.2725" x="89.7585" y="1344.1138">Click "Save Configuration"</text><polygon fill="#181818" points="649.6826,1404.5781,659.6826,1408.5781,649.6826,1412.5781,653.6826,1408.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="315.3574" x2="655.6826" y1="1408.5781" y2="1408.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.2554" x="406.8923" y="1373.2466">PUT /api/v1/admin/config</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.6997" x="393.6702" y="1388.3794">Authorization: Bearer &lt;JWT&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.0923" x="352.4739" y="1403.5122">{"agent_configs": {...}, "ai_config": {...}}</text><polygon fill="#181818" points="977.2827,1433.7109,987.2827,1437.7109,977.2827,1441.7109,981.2827,1437.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="671.6826" x2="983.2827" y1="1437.7109" y2="1437.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298.6001" x="681.1826" y="1432.645">validate_jwt(token) &amp; check_admin_role(user)</text><polygon fill="#181818" points="682.6826,1462.8438,672.6826,1466.8438,682.6826,1470.8438,678.6826,1466.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="676.6826" x2="993.2827" y1="1466.8438" y2="1466.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.5591" x="755.7031" y="1461.7778">User (confirmed admin)</text><polygon fill="#181818" points="1156.0029,1491.9766,1166.0029,1495.9766,1156.0029,1499.9766,1160.0029,1495.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="671.6826" x2="1162.0029" y1="1495.9766" y2="1495.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396.5127" x="721.5864" y="1490.9106">update_agent_config("SecurityAgent", new_config, admin.id)</text><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1220.0029" y1="1555.375" y2="1555.375"/><line style="stroke:#181818;stroke-width:1;" x1="1220.0029" x2="1220.0029" y1="1555.375" y2="1568.375"/><line style="stroke:#181818;stroke-width:1;" x1="1179.0029" x2="1220.0029" y1="1568.375" y2="1568.375"/><polygon fill="#181818" points="1189.0029,1564.375,1179.0029,1568.375,1189.0029,1572.375,1185.0029,1568.375" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.1416" x="1185.0029" y="1520.0435">Validate configuration:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1982" x="1190.4746" y="1535.1763">&#8226; No conflicting rules</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.5493" x="1200.7991" y="1550.3091">&#8226; Valid thresholds</text><path d="M10,1583.375 L74.4429,1583.375 L74.4429,1590.5078 L64.4429,1600.5078 L10,1600.5078 L10,1583.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="648.3906" style="stroke:#000000;stroke-width:1.5;" width="2070.2749" x="10" y="1583.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="1596.4419">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103.3721" x="89.4429" y="1595.5854">[Validation fails]</text><polygon fill="#181818" points="682.6826,1617.6406,672.6826,1621.6406,682.6826,1625.6406,678.6826,1621.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="676.6826" x2="1167.0029" y1="1621.6406" y2="1621.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.4048" x="871.1404" y="1616.5747">ValidationError</text><polygon fill="#181818" points="326.3574,1661.9063,316.3574,1665.9063,326.3574,1669.9063,322.3574,1665.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="320.3574" x2="660.6826" y1="1665.9063" y2="1665.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.627" x="381.2065" y="1645.7075">HTTP 422 (Unprocessable Entity)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="289.7959" x="343.6221" y="1660.8403">{"error": "Invalid threshold: must be &gt;= 1"}</text><polygon fill="#181818" points="56.4321,1691.0391,46.4321,1695.0391,56.4321,1699.0391,52.4321,1695.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="50.4321" x2="309.3574" y1="1695.0391" y2="1695.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.3311" x="108.2292" y="1689.9731">Show validation error</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="2080.2749" y1="1704.0391" y2="1704.0391"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="119.4746" x="15" y="1714.2495">[Validation passes]</text><polygon fill="#181818" points="1467.7783,1734.9766,1477.7783,1738.9766,1467.7783,1742.9766,1471.7783,1738.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1473.7783" y1="1738.9766" y2="1738.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.7754" x="1187.5029" y="1733.9106">save_agent_config("SecurityAgent", config)</text><polygon fill="#181818" points="2005.8984,1839.7734,2015.8984,1843.7734,2005.8984,1847.7734,2009.8984,1843.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1489.7783" x2="2011.8984" y1="1843.7734" y2="1843.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.1514" x="1680.2627" y="1763.0435">UPDATE agent_configs</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.9565" x="1677.8601" y="1778.1763">SET is_enabled = false,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.0869" x="1699.5596" y="1793.3091">config_json = {...},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.4849" x="1675.8606" y="1808.4419">updated_by = 'admin123',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.7461" x="1697.23" y="1823.5747">updated_at = now()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243.4834" x="1632.0967" y="1838.7075">WHERE agent_type = 'SecurityAgent'</text><polygon fill="#181818" points="1500.7783,1868.9063,1490.7783,1872.9063,1500.7783,1876.9063,1496.7783,1872.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1494.7783" x2="2021.8984" y1="1872.9063" y2="1872.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.5229" x="1709.0769" y="1867.8403">1 row updated</text><polygon fill="#181818" points="1189.0029,1898.0391,1179.0029,1902.0391,1189.0029,1906.0391,1185.0029,1902.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1483.7783" y1="1902.0391" y2="1902.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="1305.2256" y="1896.9731">Success</text><polygon fill="#181818" points="1757.5405,1927.1719,1767.5405,1931.1719,1757.5405,1935.1719,1761.5405,1931.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1763.5405" y1="1931.1719" y2="1931.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.4082" x="1412.5676" y="1926.106">delete("config:all")</text><polygon fill="#181818" points="1189.0029,1956.3047,1179.0029,1960.3047,1189.0029,1964.3047,1185.0029,1960.3047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="1960.3047" y2="1960.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.9624" x="1426.7905" y="1955.2388">1 key deleted</text><polygon fill="#181818" points="1757.5405,1985.4375,1767.5405,1989.4375,1757.5405,1993.4375,1761.5405,1989.4375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1763.5405" y1="1989.4375" y2="1989.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.0815" x="1374.231" y="1984.3716">delete("config:SecurityAgent")</text><polygon fill="#181818" points="1189.0029,2014.5703,1179.0029,2018.5703,1189.0029,2022.5703,1185.0029,2018.5703" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="2018.5703" y2="2018.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.9624" x="1426.7905" y="2013.5044">1 key deleted</text><polygon fill="#181818" points="1584.7129,2073.9688,1594.7129,2077.9688,1584.7129,2081.9688,1588.7129,2077.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1590.7129" y1="2077.9688" y2="2077.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.5254" x="1299.5952" y="2042.6372">publish(CONFIG_UPDATED,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.3999" x="1313.2903" y="2057.77">agent="SecurityAgent",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.9712" x="1306.5046" y="2072.9028">updated_by="admin123")</text><line style="stroke:#181818;stroke-width:1;" x1="1606.7129" x2="1648.7129" y1="2152.5" y2="2152.5"/><line style="stroke:#181818;stroke-width:1;" x1="1648.7129" x2="1648.7129" y1="2152.5" y2="2165.5"/><line style="stroke:#181818;stroke-width:1;" x1="1607.7129" x2="1648.7129" y1="2165.5" y2="2165.5"/><polygon fill="#181818" points="1617.7129,2161.5,1607.7129,2165.5,1617.7129,2169.5,1613.7129,2165.5" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.6221" x="1615.3157" y="2102.0356">Notify all observers:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.4917" x="1614.8809" y="2117.1685">&#8226; WebSocket clients</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.8276" x="1613.7129" y="2132.3013">&#8226; Backend instances</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.438" x="1634.9077" y="2147.4341">&#8226; Audit logger</text><polygon fill="#181818" points="1189.0029,2190.6328,1179.0029,2194.6328,1189.0029,2198.6328,1185.0029,2194.6328" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1600.7129" y1="2194.6328" y2="2194.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.603" x="1337.5564" y="2189.5669">Event published</text><polygon fill="#181818" points="677.6826,2219.7656,667.6826,2223.7656,677.6826,2227.7656,673.6826,2223.7656" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="671.6826" x2="1172.0029" y1="2223.7656" y2="2223.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="893.6777" y="2218.6997">Success</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2100.2749" x="0" y="2259.332"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="2259.332" y2="2259.332"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="2262.332" y2="2262.332"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="195.8857" x="952.1946" y="2248.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="177.3599" x="958.1946" y="2264.8325">Update AI Configuration</text><polygon fill="#181818" points="1156.0029,2299.0313,1166.0029,2303.0313,1156.0029,2307.0313,1160.0029,2303.0313" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="666.6826" x2="1162.0029" y1="2303.0313" y2="2303.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276.5293" x="779.0781" y="2297.9653">update_ai_config(new_ai_config, admin.id)</text><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1220.0029" y1="2377.5625" y2="2377.5625"/><line style="stroke:#181818;stroke-width:1;" x1="1220.0029" x2="1220.0029" y1="2377.5625" y2="2390.5625"/><line style="stroke:#181818;stroke-width:1;" x1="1179.0029" x2="1220.0029" y1="2390.5625" y2="2390.5625"/><polygon fill="#181818" points="1189.0029,2386.5625,1179.0029,2390.5625,1189.0029,2394.5625,1185.0029,2390.5625" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.5488" x="1201.5417" y="2327.0981">Validate AI config:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.2725" x="1201.1799" y="2342.231">&#8226; Model type valid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.0513" x="1209.7905" y="2357.3638">&#8226; Rate limit &gt; 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.6265" x="1185.0029" y="2372.4966">&#8226; Budget threshold &gt; 0</text><polygon fill="#181818" points="1467.7783,2415.6953,1477.7783,2419.6953,1467.7783,2423.6953,1471.7783,2419.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1473.7783" y1="2419.6953" y2="2419.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.792" x="1247.4946" y="2414.6294">save_ai_config(ai_config)</text><polygon fill="#181818" points="2005.8984,2505.3594,2015.8984,2509.3594,2005.8984,2513.3594,2009.8984,2509.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1489.7783" x2="2011.8984" y1="2509.3594" y2="2509.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144.8535" x="1681.4116" y="2443.7622">INSERT INTO ai_config</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="509.1201" x="1499.2783" y="2458.895">(ai_enabled, model_type, rate_limit_daily, budget_threshold_usd, updated_by)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="379.1963" x="1564.2402" y="2474.0278">VALUES (true, 'VERTEX_AI_PRO', 100, 200.00, 'admin123')</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195.7554" x="1655.9607" y="2489.1606">ON CONFLICT (id) DO UPDATE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295.7183" x="1605.9792" y="2504.2935">SET model_type = EXCLUDED.model_type, ...</text><polygon fill="#181818" points="1500.7783,2534.4922,1490.7783,2538.4922,1500.7783,2542.4922,1496.7783,2538.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1494.7783" x2="2021.8984" y1="2538.4922" y2="2538.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.2168" x="1680.23" y="2533.4263">1 row inserted/updated</text><polygon fill="#181818" points="1189.0029,2563.625,1179.0029,2567.625,1189.0029,2571.625,1185.0029,2567.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1483.7783" y1="2567.625" y2="2567.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="1305.2256" y="2562.5591">Success</text><polygon fill="#181818" points="1757.5405,2592.7578,1767.5405,2596.7578,1757.5405,2600.7578,1761.5405,2596.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1763.5405" y1="2596.7578" y2="2596.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.9165" x="1413.3135" y="2591.6919">delete("ai_config")</text><polygon fill="#181818" points="1189.0029,2621.8906,1179.0029,2625.8906,1189.0029,2629.8906,1185.0029,2625.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1763.5405" y1="2625.8906" y2="2625.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.9624" x="1426.7905" y="2620.8247">1 key deleted</text><polygon fill="#181818" points="1584.7129,2681.2891,1594.7129,2685.2891,1584.7129,2689.2891,1588.7129,2685.2891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1178.0029" x2="1590.7129" y1="2685.2891" y2="2685.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.7524" x="1289.9817" y="2649.9575">publish(AI_CONFIG_UPDATED,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.4946" x="1305.7429" y="2665.0903">model="VERTEX_AI_PRO",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.2798" x="1340.3503" y="2680.2231">rate_limit=100)</text><polygon fill="#181818" points="1189.0029,2710.4219,1179.0029,2714.4219,1189.0029,2718.4219,1185.0029,2714.4219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1183.0029" x2="1600.7129" y1="2714.4219" y2="2714.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.603" x="1337.5564" y="2709.356">Event published</text><polygon fill="#181818" points="677.6826,2739.5547,667.6826,2743.5547,677.6826,2747.5547,673.6826,2743.5547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="671.6826" x2="1172.0029" y1="2743.5547" y2="2743.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="893.6777" y="2738.4888">Success</text><polygon fill="#181818" points="321.3574,2798.9531,311.3574,2802.9531,321.3574,2806.9531,317.3574,2802.9531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="315.3574" x2="665.6826" y1="2802.9531" y2="2802.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62.4419" x="457.2991" y="2767.6216">HTTP 200</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332.3252" x="322.3574" y="2782.7544">{"message": "Configuration updated successfully",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265.1035" x="358.0344" y="2797.8872">"updated_at": "2025-11-02T06:15:00Z"}</text><line style="stroke:#181818;stroke-width:1;" x1="310.3574" x2="352.3574" y1="2877.4844" y2="2877.4844"/><line style="stroke:#181818;stroke-width:1;" x1="352.3574" x2="352.3574" y1="2877.4844" y2="2890.4844"/><line style="stroke:#181818;stroke-width:1;" x1="311.3574" x2="352.3574" y1="2890.4844" y2="2890.4844"/><polygon fill="#181818" points="321.3574,2886.4844,311.3574,2890.4844,321.3574,2894.4844,317.3574,2890.4844" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.6787" x="333.179" y="2827.02">Show success notification:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.1685" x="347.9341" y="2842.1528">"Configuration saved!</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.0195" x="335.5085" y="2857.2856">New settings will apply to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203.3218" x="317.3574" y="2872.4185">analyses submitted after now."</text><polygon fill="#181818" points="56.4321,2915.6172,46.4321,2919.6172,56.4321,2923.6172,52.4321,2919.6172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="50.4321" x2="309.3574" y1="2919.6172" y2="2919.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.458" x="95.1658" y="2914.5513">Display success message</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2100.2749" x="0" y="2948.1836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="2948.1836" y2="2948.1836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2100.2749" y1="2951.1836" y2="2951.1836"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="136.4653" x="981.9048" y="2937.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117.9395" x="987.9048" y="2953.6841">Real-time Effect</text><path d="M630,2975.75 L630,3060.75 L1638,3060.75 L1638,2985.75 L1628,2975.75 L630,2975.75 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1628,2975.75 L1628,2985.75 L1638,2985.75 L1628,2975.75 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="194.8477" x="944.623" y="2992.8169">Configuration Propagation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="369.9668" x="944.623" y="3007.9497">&#8226; All backend instances receive CONFIG_UPDATED event</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.7173" x="944.623" y="3023.0825">&#8226; In-memory caches invalidated</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249.8184" x="944.623" y="3038.2153">&#8226; New analyses use new configuration</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.041" x="944.623" y="3053.3481">&#8226; Running analyses continue with old config</text><!--SRC=[lLZhSYAv5VxVJt6MLCNOXMtmxEmFAhYAwoo9Rm4yivMGeaIt08qRDIkfOSdMLELPycXvaXnT-WQDnxERYd_OHZew-dHqpdS-8LyOtn11rY3fpp7bFhsdKf8bROTioS6dN57XoTHAKBc9k4oiEZICTcqXeXqe4TESuPpuBqiHnJpeHc4au0y3y-DvYgcGmjZj1Zr6bjh-4jh1cd7eHdp1bh4WYaKSFaNYPO5RG7My4Omh-FxSyuYlq675s5U0IBlImtqLyzc6e5bb8294peCfhrg_FI9NyuY8uDmi6VIBzXs4Qyq7HAhsqz2QTGxCsh5QOKYOR-2DgTWodreCE5EqjIV9sxYHhLzcEAARI38ysJvdgmUBnlqjxj-9fJ5AFXHDHZHWialybTtLV2nQF4LIBGKT__NEMFGwdcUZT7cBaMd20zco9L4KL0G7uTFHPrizXo7q1dszf8DBFlGdS4qsx7hRk2PwoRLlJZ3bEZAHOFyq8Mj2Xn911Vpfpvycjvap3BJNCSwqUHEs96G1Jim-xrHLHNWtvvcnYRN-bTb_f88jzc0iGMBg4XKBEkNT5VLVWFwoOJQZt387-baYacZ-cVeAgZk6Co8AwRaNqE9U7WcLDTRpy5qBshtxuOC7-ADHkx3zE9aymVVrTr0TH6BEWW1HJ_cl5Oe58YfDbx90V1-h1qlfvvW96bI-63y3wyUOD66ymgGtws1jIyqOvO1Xn0v6y49eAAa5okG1njii_Pgmf6f6md1cxqXMpurPwYbBL3riVgL3sfD9AUEbMh4kckYjSk359bxgGSVGP2Mic38Z-iSOcPFdu1cp01mwOsjEPfUlcPIlh-Tn6AOMwJ-58sJrbKK3eypLGKnAucAAikXK3scllGvUNV-ktvt01Gn6Z_TGy7di4Kil6UjrSiUmm0gBCVTscOVSlUTyvD4KGtB7fFfxM_kpW_yeyrHolZT6ZpcK_wke9Vwc_6vuFvn0uvj3btZGOVlDKMiFxOVV5InNBVAWMcf9VjT0gR3rxeTwlIHuMH6TpFR7lvJ1onPYNokjOqU2xJ2qWx8tUVHA3rbWWaF2kwdNDSaLSXN9xjUhgwilDQYa5v6CVJd1P2aBMjyZX8qyvYvn4OdrbF_dN_y6ayD8zCjbIAKR6khWAiQNRc2oGfsoYi80K8x4IXRzPopROt8JahtR914TpyCoPiKWUgsMQuVtKS0MZCe3kT9g7JHIOxTFqJKjFDoMp8q8ycF1rDuSoKwDgTB7MKS13NNt_K3H6uCd4Tdvxehm9KN0wqr8Vy6reDApeddZVLb_raW-kePg8z8yY9F4OTjpGUWDN5mLX1Jb44ISMYx2NDB8WvnZqwaasLAOnqfX41AJOYIw8SD6N1bhmqBGAdaLyVJy6rJ4DsRVjsWE-2FuMa7C39YPxlxL6DjhkHZ9guggsLQiiOsPjIMYugWhnnkpVVuirKeXIP0qEDsvkPhrVCM279oiOBqInZRRfAbGI7kN4W-H6SRRqXaB8awhp2pBqarQLUISwUnV41RA4oIJcVMrg2bNJZStK7tc6n5fVMGgf8zQM-sB8ch8jqKaJLZ7cAHp2hSjQ9oMKziCAar1l4bHvGwv8L9IwRtQ4NKrVEKMxNYfx4exYbVUAP-VUkr9lwWDfdoC-fl9cIi-QE5j8FBQb6idrchsMMgEShLXPspA1RFv7YVEJ3urRjwT7SmIXRCysbNn9Zxzs1ybkwlzXkfrXTETUMLjkgH5DtHhJlRmojkpztf_7iT6Itklj-QJ0XP9bYhwDWrRsdeRy4BtpitH4Gxqxni05BFa_mGbUKGsOHFFGoPNrUxZms3uOMOJhMTomTntwp2DzKoMGQrAaZ-7qDDtQeeW6Ia2U8YKRfTu3_WgGnRTKf7qp4zqFexmZQx03ndQEr9oxtPiNr8HxgUA80uODYyK2LIKRLeCdHbFJdySl6Fqn_psQY9gDaxqmxC9b-xnnzBXP4D8rRKc__JJx-P_1E4IpqRjtgeENTI6A-teI9k6R8q1lOMw2tiSeEpFQG-SATqmJuZfATB_Zd2RalMEEM_uCEwF9lXdyfX_6sXFZl5gLZCPIggXYC6m6Sop0BlIleRYH2EUfOXdiSGrMV8Yitritpttnr3LtsJLuEmZxjZ_QTOUpfv6ZsSrQDJhDIrsh_JVZ2fnuUC3w9Av6-83fegt0Rr7nzAMbpDaI9Rzdxftpxr-xogF5ndPorFVIRR4FAS24Lydj5caJE_hL5bEazvhx9I9gDo5MKfv0nKTqP3t5Vh1Y9Sma0bNgrAu5Sj0sMMt6leDTLouRotyigBtJXTxQQ5x9zv7xciShM2AbUzk4gJrkeZ3S6yELidQhrvrKxzvVzbeNDPl9lKVcettpNhzRoXsYWBcI9XRfzYyaLdTrvPOxGSGT7q6tqtv0zsbRnNOCQHXijc4-ckrAIUSX7kKFkXoZg7MYCb2eT95NN3bHFpnoohPF_aIgoYkD26EA0al5LjZo1SB_KMSPaA4Io52-iSprV84V75HH8uFemrPclylBd3Ua3_YdX_s1H3Kfqm_FWgf1LJxTWk7_79Drv701w7-eaa_Yf8tGU1CT8JIIE1BGClneevsXgEOSosWKsCqmhZ65CptZ9epxJBT6VJrKE-_]--></g></svg>